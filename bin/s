#!/bin/bash

search_and_vim () {
    if [ -z "$1" ]; then
        echo -n "search word? "
        read ans
    else
        ans="$@"
    fi
    if [ -z "$ans" ]; then
        return 1
    fi
    res=$(pt "$ans" | peco --query "$LBUFFER" )
    if [ -z "$res" ]; then
        return 1
    fi
    vim $(echo "$res" | awk -F : '{print "-c " $2 " " $1}')
}
search_and_vim "$@"
